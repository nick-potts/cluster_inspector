#!/bin/sh

# Railway clustering setup
# Requires: RAILWAY_PRIVATE_DOMAIN set by Railway

if [ -n "$RAILWAY_PRIVATE_DOMAIN" ]; then
  # Use long names for distributed Erlang
  export RELEASE_DISTRIBUTION=name

  # Get this container's own private IP (not the DNS lookup which returns all replicas)
  PRIVATE_IP=$(hostname -i | awk '{print $1}')

  if [ -n "$PRIVATE_IP" ]; then
    export RELEASE_NODE="cluster_monitor@${PRIVATE_IP}"
  fi
fi
